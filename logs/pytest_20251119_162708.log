============================= test session starts ==============================
platform linux -- Python 3.13.9, pytest-9.0.1, pluggy-1.5.0
rootdir: /home/harish/harry_ws/hd_map_builder
configfile: pyproject.toml
collected 11 items / 4 skipped

tests/test_bag_reader.py .                                               [  9%]
tests/test_calibration.py ..                                             [ 27%]
tests/test_export_map.py ..                                              [ 45%]
tests/test_multi_sensor_fusion.py .                                      [ 54%]
tests/test_occupancy_grid.py F..                                         [ 81%]
tests/test_pose_graph.py ..                                              [100%]

=================================== FAILURES ===================================
______________ test_integrate_hits_updates_log_odds_and_semantics ______________

    def test_integrate_hits_updates_log_odds_and_semantics():
        config = OccupancyGridConfig(resolution=1.0, size=(4, 4, 2), origin=(0.0, 0.0, 0.0))
        grid = OccupancyGrid(config)
        pts = np.array([[0.2, 0.2, 0.1], [1.2, 0.2, 0.1]])
        semantics = np.array([5, 6])
        count = grid.integrate_hits(pts, semantics=semantics)
        assert count == 2
        prob = grid.occupancy_probabilities()
        assert prob[0, 0, 0] > 0.5
        semantic_map = grid.semantic_mode()
        assert semantic_map[0, 0, 0] == 5
        assert semantic_map[1, 0, 0] == 6
        centers, sem = grid.occupied_points_with_semantics(threshold=0.5)
>       assert centers.shape[0] == 2
E       assert 32 == 2

tests/test_occupancy_grid.py:20: AssertionError
=========================== short test summary info ============================
FAILED tests/test_occupancy_grid.py::test_integrate_hits_updates_log_odds_and_semantics
=================== 1 failed, 10 passed, 4 skipped in 0.28s ====================
